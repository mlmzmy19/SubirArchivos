<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
    <title></title>
  </head>
  <script>
var sessionTimeout;
var sessionDeath;
var checkActivity=true;



function sessionAlive(){



alert(checkActivity);
	if (checkActivity){
	//alert("entra a actividad");

		//kill old timers
		window.clearTimeout(sessionTimeout);
		window.clearTimeout(sessionDeath);
                //session is valid 20min
	
                sessionTimeout=window.setTimeout("sessionExpired()",20*60*10);
                //alert(">>"+sessionTimeout);
		checkActivity=false;
                window.setTimeout("unlock()",200);
	}
}
function unlock(){
	checkActivity=true;
}
/**
*@author YROU
*permet de prevenir l'utilisateur que sa session va expirer */ function
sessionExpired(){
	
	//	alert the user that his session will to expired
        var nowe = new Date;
        var horDay = nowe.getHours();
        var minDay = nowe.getMinutes();
        var secDay = nowe.getSeconds();

      	alert("Tu sesion expirara en 2 segundos ... "+horDay+":"+minDay+":"+secDay+" (hh:mm:ss)");
	// 5 sec to move before close the app
	sessionDeath=window.setTimeout("sessionKiller()",500);
}
/**
*@author YROU
*fermeture de la session
*/
function sessionKiller(){
        
        unlock();
        sessionAlive();
	//	close Application here
	//      window.close();
} 
  
  </script>
  <body onload="sessionAlive();" onkeypress="sessionAlive();" onclick="sessionAlive();">
  


<table border=1>
    <tr>
      <td>
        <iframe width="100%" height="150" src="frame.html" frameborder="1" onload="sessionAlive();"  onkeypress="sessionAlive();" onclick="sessionAlive();" onblur="sessionAlive();">        
      </td>
    </tr>
</table>




  </body>
</html>
